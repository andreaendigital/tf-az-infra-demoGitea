---
# Gitea Configuration Variables
gitea_version: "1.25.2"
gitea_binary_url: "https://dl.gitea.com/gitea/{{ gitea_version }}/gitea-{{ gitea_version }}-linux-amd64"
gitea_user: "git"
gitea_home: "/home/git"
gitea_work_dir: "/var/lib/gitea"
gitea_config_dir: "/etc/gitea"
gitea_custom_dir: "{{ gitea_work_dir }}/custom"
gitea_data_dir: "{{ gitea_work_dir }}/data"
gitea_log_dir: "{{ gitea_work_dir }}/log"

# MySQL Connection (will be overridden by Terraform outputs)
mysql_host: "{{ lookup('env', 'MYSQL_HOST') }}"
mysql_port: "3306"
mysql_database: "{{ lookup('env', 'MYSQL_DATABASE') | default('infraGiteaDB', true) }}"
mysql_user: "{{ lookup('env', 'MYSQL_USER') }}"
mysql_password: "{{ lookup('env', 'MYSQL_PASSWORD') }}"

# Gitea Server Configuration
gitea_domain: "{{ lookup('env', 'GITEA_DOMAIN') | default(ansible_default_ipv4.address, true) }}"
gitea_http_port: "3000"
gitea_ssh_port: "22"
gitea_root_url: "http://{{ gitea_domain }}:{{ gitea_http_port }}/"

# Security
gitea_secret_key: "{{ lookup('env', 'GITEA_SECRET_KEY') | default(lookup('password', '/dev/null chars=ascii_letters,digits length=64'), true) }}"
gitea_internal_token: "{{ lookup('env', 'GITEA_INTERNAL_TOKEN') | default(lookup('password', '/dev/null chars=ascii_letters,digits length=105'), true) }}"
