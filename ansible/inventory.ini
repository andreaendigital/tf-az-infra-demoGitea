# Ansible Inventory for Azure Gitea
#
# Instructions for setup:
# 1. Deploy Azure infrastructure with Terraform from /infra directory:
#    cd infra
#    terraform init
#    terraform apply
#
# 2. Get the static VM public IP and MySQL details from Terraform outputs:
#    terraform output -raw vm_public_ip
#    terraform output -raw mysql_server_host
#    terraform output -raw mysql_admin_username
#    terraform output -raw mysql_admin_password
#    terraform output -raw mysql_database_name
#
# 3. Replace the placeholders below (<VM_PUBLIC_IP>, etc.) with actual values from step 2
#
# 4. Ensure SSH private key is available at the specified path (~/.ssh/azure-gitea-key.pem)
#
# 5. Run Ansible from the ansible-az-demoGitea repository:
#    ansible-playbook -i inventory.ini playbook.yml
#
# NOTE: The VM has a STATIC public IP, so you only need to configure this file 
# once after the initial Terraform deployment. No dynamic inventory generation needed.

[gitea]
vm-gitea-azure ansible_host=<VM_PUBLIC_IP> ansible_user=azureuser ansible_ssh_private_key_file=~/.ssh/azure-gitea-key.pem

[gitea:vars]
# MySQL connection details (from Terraform outputs)
mysql_host=<MYSQL_SERVER_HOST>
mysql_username=<MYSQL_ADMIN_USERNAME>
mysql_password=<MYSQL_ADMIN_PASSWORD>
mysql_dbname=<MYSQL_DATABASE_NAME>
